# ==============================================================================
# Telstar Modbus MQTT Bridge - Konfiguration
# ==============================================================================
# Diese Datei enthält alle Umgebungsvariablen für den MQTT Bridge Container
# Verwendung: docker-compose -f docker-compose.mqtt.yml --env-file .env.mqtt up -d
# ==============================================================================

# ------------------------------------------------------------------------------
# Modbus-Konfiguration (ERFORDERLICH)
# ------------------------------------------------------------------------------
# IP-Adresse oder Hostname des Telstar/Smart-Me Zählers
MODBUS_HOST=192.168.1.100

# Modbus-TCP Port (Standard: 502)
MODBUS_PORT=502

# Modbus Unit ID (Standard: 1)
MODBUS_UNIT_ID=1

# Offset für Registeradressen (z.B. -40001 bei 40001-Adressierung)
# Standard: 0 für direkte Adressierung
MODBUS_ADDRESS_OFFSET=0

# ------------------------------------------------------------------------------
# MQTT-Konfiguration (ERFORDERLICH)
# ------------------------------------------------------------------------------
# MQTT Broker Hostname oder IP-Adresse
MQTT_HOST=192.168.1.10

# MQTT Broker Port (Standard: 1883 für unverschlüsselt, 8883 für TLS)
MQTT_PORT=1883

# MQTT Authentifizierung (optional, bei Bedarf auskommentieren)
MQTT_USER=
MQTT_PASS=

# Quality of Service Level (0, 1, oder 2)
# 0 = At most once, 1 = At least once, 2 = Exactly once
MQTT_QOS=0

# Nachrichten als Retained markieren (true/false)
MQTT_RETAIN=false

# MQTT Topic Präfix (alle Topics werden mit diesem Präfix veröffentlicht)
MQTT_TOPIC_PREFIX=meter/telstar80a

# ------------------------------------------------------------------------------
# MQTT TLS-Verschlüsselung (optional)
# ------------------------------------------------------------------------------
# TLS aktivieren (true/false)
MQTT_TLS=false

# Pfade zu TLS-Zertifikaten (im Container)
# Hinweis: Mounte Zertifikate nach /etc/mqtt/certs im Container
MQTT_TLS_CA=/etc/mqtt/certs/ca.crt
MQTT_TLS_CERT=/etc/mqtt/certs/client.crt
MQTT_TLS_KEY=/etc/mqtt/certs/client.key

# Ungültige Zertifikate akzeptieren (nur für Tests, nicht in Produktion!)
MQTT_TLS_INSECURE=false

# ------------------------------------------------------------------------------
# Allgemeine Einstellungen
# ------------------------------------------------------------------------------
# Abfrageintervall in Sekunden
INTERVAL=10

# Log-Level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# ------------------------------------------------------------------------------
# Prometheus Metriken
# ------------------------------------------------------------------------------
# Port für Prometheus /metrics Endpunkt
PROMETHEUS_PORT=8000

# Präfix für Prometheus Metriken
PROMETHEUS_PREFIX=telstar

# ------------------------------------------------------------------------------
# REST-API / Webhook
# ------------------------------------------------------------------------------
# Port für REST-API Endpunkt
API_PORT=5000
